# =============================================================================
# Sleep Service Helm Chart Values
# =============================================================================

# =============================================================================
# 이미지 설정
# =============================================================================
image:
  repository: octacloud/sleep-service
  tag: "311e80cb0146ecb8ea4ef4c1b0a9d627ba7af2c6-18567711625"
  pullPolicy: IfNotPresent
# =============================================================================
# 서비스 설정
# =============================================================================
service:
  type: ClusterIP
  port: 8080
  targetPort: 8080
# =============================================================================
# 배포 설정
# =============================================================================
replicaCount: 1
# Rolling Update 비활성화 (문제 파드 방지)
strategy:
  type: Recreate
# =============================================================================
# 리소스 설정
# =============================================================================
resources:
  limits:
    cpu: 1000m
    memory: 1Gi
  requests:
    cpu: 500m
    memory: 512Mi
# =============================================================================
# 헬스 체크 설정
# =============================================================================
livenessProbe:
  httpGet:
    path: /actuator/health/liveness
    port: 8080
  initialDelaySeconds: 300
  periodSeconds: 30
  failureThreshold: 5
  timeoutSeconds: 10
readinessProbe:
  httpGet:
    path: /actuator/health/readiness
    port: 8080
  initialDelaySeconds: 300
  periodSeconds: 30
  failureThreshold: 5
  timeoutSeconds: 10
# =============================================================================
# 환경 변수 설정
# =============================================================================
env:
  SPRING_PROFILES_ACTIVE: "dev"
  MONGO_URI: "mongodb://10.0.0.45:27017/mong"
  SPRING_DATA_REDIS_HOST: "10.226.34.155"
  SPRING_DATA_REDIS_PORT: "6379"
# =============================================================================
# 서비스 계정 설정
# =============================================================================
serviceAccount:
  create: true
  name: ""
# =============================================================================
# ConfigMap 설정
# =============================================================================
configMap:
  create: true
  name: ""
# =============================================================================
# Secret 설정
# =============================================================================
secrets:
  create: true
  name: ""
  # JWT_KEY는 민감한 정보이므로 Secret으로 관리
  JWT_KEY: ""
sealedSecrets:
  enabled: true
  encryptedData:
    JWT_KEY: "AgBxWMVIag0xwLq38AFIuGYqp5zxN5uiy7zTgHRkRyhJPk2lzLrwcLjfYtj3u3VyB6Ui+zNsKkKTcJT2WM/qqddTj7RiTZ6XMYv3ECbBXBRDicR3s2shKXi29MkR4QXu8KDoHC2ax5/XIMRYLAknG3koJAlM7df/jiTqHiQvz6653oRYESywLwrWyt2C6rKAxrQ2q0MEL7vXKqCyG2uCqSeAVAve2LTf+R/mArWH8aufNCIB3C6HuC0vDqYPyXeOSLEJkdMnMOZXq2y0Uc2rz6EJzfVlRyFbWwvOLjIUr4WmUq11PRLT0FccCz0/iczji6MYIlCRd51JAkf65aHzM9+YsHxsuO6zthQpPKnMsoYMM0mcLoa2Ekq0EUsk9A4N5uzoUaDYlpgzK4zXXZpPfxUwfVITUB+qNnF3pYhnpvWv4WDQqOvAG5TrUJKaLd8JYcM9JBvtVF/y4YGb7raiMWTtQI8CwCRoYhU2GpwlJD2Tsj7HtQK0BqXgZ3PZmjWkvVIKNXY3dWes7cuHufElbBdgqGKOF7FQqF2k46r8BHqhmbbQoL3iggH8F0xK4XHYv0jviOJKSUTQfw6ItV5oMmo6SVG3VoGi6+PWc2Wk6wiq/3ct05cRTo5H3uVAeSmQSsJZB84y26/pGcvhExbBooRlFH9L22pewDCSemriFgmHEVA+zOyGAa/uCTDtQuMfNaN8yoUrvIn/1CUrwWFQKBffLi8ClxvpeMVOb5mr2CZZVlAkSarX4SvDgYXSb9A4LSKnD+N412VJn/3bxQ9FPncgBd5y0V3feOOShamqUH1UnjxLpyWg52Qzxw=="
# =============================================================================
# Ingress 설정
# =============================================================================
ingress:
  enabled: true
  className: "nginx"
  annotations:
    cert-manager.io/cluster-issuer: "letsencrypt"
    nginx.ingress.kubernetes.io/auth-url: "http://auth-service.microservices-dev.svc.cluster.local:8080/api/auth/internal"
    nginx.ingress.kubernetes.io/auth-method: "POST"
    nginx.ingress.kubernetes.io/use-regex: "true"
    nginx.ingress.kubernetes.io/proxy-body-size: "50m"
  hosts:
    - host: "api.mong.live"
      paths:
        - path: /api/sleep
          pathType: Prefix
  tls:
    - secretName: api-mong-live-tls
      hosts:
        - "api.mong.live"
# =============================================================================
# Cloud SQL Proxy 설정 (필요시)
# =============================================================================
cloudSqlProxy:
  enabled: false
  port: 3306
  connectionName: ""
# =============================================================================
# 노드 선택자
# =============================================================================
nodeSelector: {}
# =============================================================================
# 톨러레이션
# =============================================================================
tolerations: []
# =============================================================================
# 어피니티
# =============================================================================
affinity: {}
# =============================================================================
# 배포 전략 설정
# =============================================================================
blueGreen:
  enabled: false # Rolling Update 사용
# =============================================================================
# 추가 설정
# =============================================================================
podAnnotations:
  prometheus.io/scrape: "true"
  prometheus.io/path: "/actuator/prometheus"
  prometheus.io/port: "8080"
podSecurityContext: {}
securityContext: {}
imagePullSecrets: []
autoscaling:
  enabled: true
  minReplicas: 1
  maxReplicas: 3
  targetCPUUtilizationPercentage: 70
lifecycle: {}
# =============================================================================
# Metrics 설정
# =============================================================================
metrics:
  enabled: true
